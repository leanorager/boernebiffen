---
import Button from "./Button.astro";

interface Props {
  backgroundImage: string;
  backgroundAlt?: string;

  logo: string;
  logoAlt?: string;

  // Valgfri metadata
  genre?: string;
  year?: string;
  duration?: string; // fx "45 min"
  ageLabel?: string; // fx "3–7 år"
  showHdTag?: boolean; // default: true

  heading: string;
  description: string; // brødtekst

  playLabel: string;
  playIcon: string;

  favoriteLabel?: string;
  favoriteIcon?: string;

  stylingclasses?: string;
}

const {
  backgroundImage,
  backgroundAlt = "",

  logo,
  logoAlt = "",

  genre,
  year,
  duration,
  ageLabel,
  showHdTag = true,

  heading,
  description,

  playLabel,
  playIcon,

  favoriteLabel,
  favoriteIcon,

  stylingclasses = "",
} = Astro.props;

// Responsiv wrapper:
// - full width på små skærme
// - højden vokser op mod desktop
// - max bredde 1385px på store skærme
const wrapperClasses =
  "relative overflow-hidden rounded-[5px]" +
  "w-full h-[460px] md:h-[477px] lg:h-[562px] lg:max-w-[1384px]";
---

<section class:list={[wrapperClasses, stylingclasses]}>
  <!-- Baggrundsbillede -->
  <img
    src={backgroundImage}
    alt={backgroundAlt}
    class="absolute inset-0 h-full w-full object-cover"
    loading="lazy"
  />

  <!-- Gradient:
       MOBIL: bund → top
       TABLET/DESKTOP (md+): venstre → højre -->
  <div
    class="absolute inset-0
      bg-gradient-to-t from-black via-black/80 to-transparent
      md:bg-gradient-to-r md:from-black md:via-black/55 md:to-transparent"
  >
  </div>

  <!-- Indhold -->
  <div class="relative z-10 flex h-full items-end md:items-center">
    <!--
     størrelser og media queries styres af wrapperen herover
    -->
    <div class="px-5 pb-20 pt-5 md:pl-16 md:pr-10 md:py-10 max-w-xl">
      <!-- Logo -->
      <img
        src={logo}
        alt={logoAlt}
        class="max-w-[258px] md:max-w-[516px] lg:max-w-[774px] w-auto mb-[12px]"
        loading="lazy"
      />

      <!-- Metadata — vises kun hvis der er data -->
      {
        (genre || year || duration || ageLabel) && (
          <div class="flex flex-wrap items-center gap-3 text-xs md:text-sm text-white/80 mb-[12px] md:mb-[16px]">
            {genre && <span>{genre}</span>}
            {genre && year && <span class="text-white/40">•</span>}
            {year && <span>{year}</span>}

            {(genre || year) && duration && (
              <span class="text-white/40">•</span>
            )}
            {duration && <span>{duration}</span>}

            {ageLabel && (
              <span class="ml-2 inline-flex items-center rounded border border-white/40 px-2 py-[2px] text-[10px] md:text-xs">
                {ageLabel}
              </span>
            )}

            {showHdTag && (
              <span class="inline-flex items-center rounded border border-white/40 px-2 py-[2px] text-[10px] md:text-xs">
                HD
              </span>
            )}
          </div>
        )
      }
      <div class="max-w-100">
        <!-- Overskrift -->
        <h5 class="text-base md:text-lg font-semibold text-white mb-[5px]">
          {heading}
        </h5>

        <!-- Brødtekst -->
        <p
          class="text-sm md:text-base text-white leading-relaxed mb-[24px] md:mb-[40px] line-clamp-3 md:line-clamp-none"
        >
          {description}
        </p>
      </div>
      <!-- Knapper -->
      <div class="flex flex-wrap gap-x-1 gap-y-3">
        <Button variant="primary" icon={playIcon}>
          {playLabel}
        </Button>

        {
          favoriteLabel && favoriteIcon && (
            <Button variant="secondary" icon={favoriteIcon}>
              {favoriteLabel}
            </Button>
          )
        }
      </div>
    </div>
  </div>
</section>
