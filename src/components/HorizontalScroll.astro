---
interface Props {
  className?: string; // ekstra spacing rundt om rækken, hvis du vil
  showArrow?: boolean; // hvis du vil kunne slå pilen fra i nogle rækker
}

const { className = "", showArrow = true } = Astro.props;
---

<div class:list={["relative", className]} data-hscroll-wrapper>
  <!-- Selve scrolleren -->
  <div
    class="w-[100dvw] -mx-4 pl-4 pr-4
           lg:mx-0 lg:w-full
           overflow-x-auto scroll-smooth
           snap-x snap-mandatory
           [-ms-overflow-style:none]
           [scrollbar-width:none]
           [&::-webkit-scrollbar]:hidden"
    data-hscroll
  >
    <div class="flex flex-nowrap gap-4 lg:gap-6" data-hscroll-track>
      <!-- Her kommer alle dine cards ind -->
      <slot />
    </div>
  </div>

  <!-- Højre pil kun på desktop -->
  {
    showArrow && (
      <button
        type="button"
        class="hidden lg:flex items-center justify-end
         absolute inset-y-0 right-0
         h-[100%]
         bg-gradient-to-l from-black/60 to-transparent
         cursor-pointer"
        data-hscroll-next
        aria-label="Scroll videre"
      >
        <img
          src="/svg/arrow_right.svg"
          alt=""
          aria-hidden="true"
          class="h-full w-auto"
        />
      </button>
    )
  }
</div>

<script>
  // Simpelt vanilla JS, virker for alle instanser af komponentet
  document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll("[data-hscroll-wrapper]").forEach((wrapper) => {
      const scroller = wrapper.querySelector("[data-hscroll]");
      const nextBtn = wrapper.querySelector("[data-hscroll-next]");

      if (!scroller || !nextBtn) return;

      nextBtn.addEventListener("click", () => {
        scroller.scrollBy({
          left: scroller.clientWidth * 0.8, // scroll ca. én "side"
          behavior: "smooth",
        });
      });
    });
  });
</script>
